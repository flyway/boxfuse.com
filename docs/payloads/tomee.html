---
layout: docs
menu: tomee
subtitle: 'TomEE'
---
<div id="tomee">
    <p><img src="/assets/img/tomee.png"></p>

    <p>Boxfuse supports Java EE apps written in Java or any other language and packaged as a <strong>.war file</strong>
        running on <strong>TomEE 1.7.x</strong> or <strong>TomEE 7.0.x</strong> using either <strong>OpenJDK 7.x or 8.x</strong>.</p>

    <p>If your .war file contains a <code>WEB-INF/resources.xml</code> file, Boxfuse will automatically run it using
        TomEE instead of Tomcat.
        By default it uses TomEE Web Profile, but it will automatically select TomEE Plus if you have defined any JMS
        resources.</p>
<pre class="filetree"><i class="fa fa-folder-open"></i> my-tomee-app
  <i class="fa fa-folder-open"></i> src
    <i class="fa fa-folder-open"></i> main
      <i class="fa fa-folder"></i> java
      <i class="fa fa-folder"></i> resources
      <i class="fa fa-folder-open"></i> webapp
        <i class="fa fa-folder-open"></i> WEB-INF
          <span><i class="fa fa-file-text"></i> resources.xml</span></pre>
    <p>You can override the automatic behavior and force a particular TomEE edition to be used by passing in <code>-components.tomee-webprofile=1.7.4</code>
        (for TomEE Web Profile)
        or <code>-components.tomee-plus=1.7.4</code> (for TomEE Plus).</p>

    <h2>Sample App</h2>

    <p class="alert alert-info"><strong>Tip:</strong> Check out our <a href="/blog/javaee-aws"><strong>blog
        post</strong></a> on how to
        deploy TomEE Java EE applications on AWS using Boxfuse</p>

    <p>You can find a TomEE sample app for Boxfuse on GitHub at <strong><a
            href="https://github.com/boxfuse/boxfuse-samples/tomee">boxfuse/boxfuse-samples/tomee</a></strong>.</p>


    <h2>Java Runtime Environment</h2>
    <p>By default Boxfuse uses the <strong>latest OpenJDK 8.x version</strong> (headless JRE).</p>

    <h3>OpenJDK version</h3>
    <p>If you want to switch to OpenJDK 7.x or simply an
        older version, you can do so using the <code>-components.openjdk</code> configuration setting:</p>

    <pre class="console"><span>&gt;</span> boxfuse run my-app-1.0.jar <strong>-components.openjdk=</strong>7.80.32</pre>

    <p>To find out which OpenJDK versions are available from the Boxfuse Inventory you can simply issue:</p>

    <pre class="console"><span>&gt;</span> boxfuse inventory openjdk</pre>

    <h3>Custom JRE</h3>
    <p>If you prefer to use a different JRE, including the <strong>Oracle JRE</strong>, rather than the default OpenJDK one,
        you can do so by including the <strong>Linux x64</strong> JRE distribution of your choice in a <code>/WEB-INF/jre</code> folder <em>inside</em> the war file.</p>

    <p>If you use Maven or Gradle, this means the <code>jre</code> folder should be put into the <code>src/main/webapp/WEB-INF</code> directory:</p>

    <pre class="filetree"><i class="fa fa-folder-open"></i> my-tomee-app
  <i class="fa fa-folder-open"></i> src
    <i class="fa fa-folder-open"></i> main
      <i class="fa fa-folder"></i> java
      <i class="fa fa-folder"></i> resources
      <i class="fa fa-folder-open"></i> webapp
        <i class="fa fa-folder-open"></i> WEB-INF
          <span><i class="fa fa-folder-open"></i> jre
  <i class="fa fa-folder-open"></i> bin
    <i class="fa fa-file"></i> java
    <i class="fa fa-file"></i> ...
  <i class="fa fa-folder-open"></i> lib
    <i class="fa fa-folder"></i> amd64
    <i class="fa fa-folder"></i> ...
    <i class="fa fa-file"></i> rt.jar
    <i class="fa fa-file"></i> ...
  <i class="fa fa-file-text"></i> COPYRIGHT
  <i class="fa fa-file-text"></i> LICENSE
  <i class="fa fa-file"></i> ...</span></pre>

    <div class="alert alert-info"><p><strong>Tip for Git users</strong></p>
        <p>To avoid file corruption due to Git line-ending normalization, add the following line to <code>.gitattributes</code></p>
        <pre class="prettyprint" style="margin-bottom: 0">src/main/webapp/WEB-INF/jre/* binary</pre>
    </div>

    <h2>TomEE version</h2>

    <p>By default Boxfuse uses the <strong>latest TomEE 1.7.x version</strong>. If you want to switch to TomEE 7.0.x or simply an
        older version, you can do so using the <code>-components.tomee-webprofile</code> and <code>-components.tomee-plus</code> configuration settings:</p>

    <pre class="console"><span>&gt;</span> boxfuse run my-webapp-1.0.war <strong>-components.tomee-webprofile=</strong>7.0.0-M3</pre>

    <p>To find out which TomEE versions are available from the Boxfuse Inventory you can simply issue:</p>

    <pre class="console"><span>&gt;</span> boxfuse inventory tomee-webprofile</pre>

    <h2>HTTP</h2>

    <p>By default, Boxfuse will automatically configure TomEE to listen to HTTP traffic on port 80.</p>

    <h2>SSL (TLS) / HTTPS</h2>

    <p>To use <strong>HTTPS</strong> simply add the KeyStore containing your SSL certificate inside the .war file as
        <code>/WEB-INF/keystore.jks</code>. It must be secured with the standard password <em>changeit</em>.
        Boxfuse will then automatically configure Tomcat to start serving traffic via HTTPS on port 443, as well as
        <strong>automatically redirect any insecure HTTP traffic to the secure HTTPS connection</strong>.
    </p>

    <p>If you use Maven or Gradle this means you have to put the <code>keystore.jks</code> file under <code>src/main/webapp/WEB-INF</code>:
    </p>
    <pre class="filetree"><i class="fa fa-folder-open"></i> my-tomee-app
  <i class="fa fa-folder-open"></i> src
    <i class="fa fa-folder-open"></i> main
      <i class="fa fa-folder"></i> java
      <i class="fa fa-folder"></i> resources
      <i class="fa fa-folder-open"></i> webapp
        <i class="fa fa-folder-open"></i> WEB-INF
          <span><i class="fa fa-file"></i> keystore.jks</span></pre>

    <h2>Root Certificates</h2>

    <p>By default, Boxfuse uses the <strong>same root certificate bundle as the latest version of Firefox</strong>.
        Additionally Boxfuse also includes the <strong>root certificates for Amazon RDS</strong>, so you can connect
        securely to RDS databases out of the box.</p>
    <p>You can, however, ship your own set of root certificates, by placing them in a KeyStore at
        <code>/WEB-INF/cacerts</code>.
        Boxfuse will then automatically configure both the JRE and Tomcat to use these instead.
    </p>

    <p>If you use Maven or Gradle this means you have to put the <code>cacerts</code> file under <code>src/main/webapp/WEB-INF</code>:
    </p>
    <pre class="filetree"><i class="fa fa-folder-open"></i> my-tomee-app
  <i class="fa fa-folder-open"></i> src
    <i class="fa fa-folder-open"></i> main
      <i class="fa fa-folder"></i> java
      <i class="fa fa-folder"></i> resources
      <i class="fa fa-folder-open"></i> webapp
        <i class="fa fa-folder-open"></i> WEB-INF
          <span><i class="fa fa-file"></i> cacerts</span></pre>

    <h2>JCE unlimited strength cryptography</h2>

    <p>To enable JCE unlimited cryptography (for AES-256, RSA-4096, ...), download the policy zip from the Oracle website
        for either <a href="http://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html">Java 7</a>
        or <a href="http://www.oracle.com/technetwork/java/javase/downloads/jce8-download-2133166.html">Java 8</a>.</p>
    <p>Extract both <code>local_policy.jar</code> and <code>US_export_policy.jar</code> and place them under <code>/WEB-INF</code> inside your war file.
        If you use Maven or Gradle, this means both policy jar files should be put into the <code>src/main/webapp/WEB-INF</code> directory.
        Boxfuse will then automatically configure the JRE to use these instead.
    </p>

    <pre class="filetree"><i class="fa fa-folder-open"></i> my-dropwizard-app
  <i class="fa fa-folder-open"></i> src
    <i class="fa fa-folder-open"></i> main
      <i class="fa fa-folder"></i> java
      <i class="fa fa-folder"></i> resources
      <i class="fa fa-folder-open"></i> webapp
        <i class="fa fa-folder-open"></i> WEB-INF
          <span><i class="fa fa-file"></i> local_policy.jar
<i class="fa fa-file"></i> US_export_policy.jar</span></pre>

    <h2 id="databases">Databases</h2>

    <h3>Database auto-provisioning</h3>

    <p>If your app includes the PostgreSQL or MySQL JDBC driver, Boxfuse will automatically provision the necessary PostgreSQL or MySQL database
        in each environment.</p>

    <p>When using the <a href="/docs/databases">Boxfuse database auto-provisioning support</a>, Boxfuse automatically
        injects environment variables in your instance with the correct details: <code>BOXFUSE_DATABASE_URL</code> (jdbc url),
        <code>BOXFUSE_DATABASE_USER</code> (database user) and <code>BOXFUSE_DATABASE_PASSWORD</code> (database password).</p>

    <p>To make this easy to use, Boxfuse also automatically creates a <a
            href="http://tomee.apache.org/datasource-config.html">TomEE JDBC
        DataSource</a> called <code>boxfuseDatabase</code> that you can then easily reference in your application.</p>

    <p>When using <code>persistence.xml</code>, integration looks like this:</p>

    <pre class="prettyprint">&lt;persistence ... &gt;
  &lt;persistence-unit name="..."&gt;
    <strong>&lt;jta-data-source&gt;boxfuseDatabase&lt;/jta-data-source&gt;</strong>
    ...
  &lt;/persistence-unit&gt;
&lt;/persistence&gt;</pre>

    <p>This works identically in all environments and Boxfuse ensures you always get the correct settings.</p>

    <h3>Using an existing database</h3>
    <p>To disable database auto-provisioning and use an existing database set <code>db.type</code> to <code>none</code> when <a
            href="/docs/commandline/create#dbtype">creating your app</a>.</p>

    <h2>Java Agents</h2>

    <p>By default Boxfuse will activate the OpenEJB Java Agent.</p>

    <p>If you wish to launch the JRE with one or more additional Java Agents, simply place the Java Agent files inside
        the war file under
        <code>/WEB-INF/javaagents/</code>. In a Maven or Gradle project this means you have to put your agent jar and
        whatever other files it requires under <code>src/main/webapp/WEB-INF/javaagents</code>:</p>
    <pre class="filetree"><i class="fa fa-folder-open"></i> my-tomee-app
  <i class="fa fa-folder-open"></i> src
    <i class="fa fa-folder-open"></i> main
      <i class="fa fa-folder"></i> java
      <i class="fa fa-folder"></i> resources
      <i class="fa fa-folder-open"></i> webapp
        <i class="fa fa-folder-open"></i> WEB-INF
          <span><i class="fa fa-folder-open"></i> javaagents
  <i class="fa fa-file"></i> myjavaagent.jar
  <i class="fa fa-file-text"></i> myjavaagent.properties</span></pre>

    <p>Boxfuse will then <strong>automatically configure the JRE to use these Java Agents</strong></p>

    <h2>JVM Memory</h2>

    <p>By default Boxfuse will <strong>dynamically configure your JVM heap to use 85% of the available memory</strong>
        in the instance. All other settings
        use the JVM defaults. You can override this by specifying the required JVM arguments like <code>-Xmx</code> via
        the
        <code>jvm.args</code> configuration setting.</p>

    <h2>Temporary Files</h2>

    <p>Boxfuse configures the JVM and the TomEE ActiveMQ Broker to use <code>/tmp</code> as the directory to store
        temporary files and provisions <strong>1 GB of space by default</strong>.</p>
    <p>To increase this (up to a maximum of 16 TB), simply set
        the <code>tmp</code> configuration setting to the number of GB of temp space you need. To prevent Boxfuse from
        provisioning any temp space set <code>tmp</code> to <code>0</code>.</p>

    <h2 id="debugging">Debugging</h2>
    <p>Remote debugging (including hot-code replace) with your favorite IDE is fully supported.
        Details and setup instructions on our <a href="/docs/debugging">debugging page</a>.</p>

    <h2 id="profiling">Profiling</h2>
    <p>Profiling with tools like JVisualVM and Java Flight Recorder is fully supported.
        Details and setup instructions on our <a href="/docs/profiling">profiling page</a>.</p>

    <h2 id="live">Live Reloading</h2>
    <p>Boxfuse supports <a href="/docs/live">Live Reloading</a> of exploded war files.</p>

    <h2 id="timezone">Time Zone</h2>

    <p>By default all Boxfuse instance use the <strong><code>UTC</code> time zone</strong>.</p>

    <p>We <strong>don't recommend changing this</strong> as this greatly simplifies time zone issues in machine to machine communication
        and cleanly relegates all time zones related aspects to a pure presentation layer concern.</p>

    <p>If however you still do want to change this, you can override the default time zone of the JVM using the Boxfuse
        <code>jvm.args</code> configuration property. For example to change the time zone of your JVM to <code>America/Los_Angeles</code>
        you would do so like this:</p>

    <pre class="console"><span>&gt;</span> boxfuse fuse <strong>-jvm.args=-Duser.timezone=</strong>America/Los_Angeles</pre>

    <h2 id="newrelic">New Relic support</h2>

    <p>To monitor your app using <a href="/docs/newrelic">New Relic</a> simply pass in your New Relic license key when
        fusing your image and Boxfuse will automatically install and configure the New Relic Servers Linux x64 and New Relic Java agents for you.</p>

    <pre class="console"><span>&gt;</span> boxfuse fuse <strong>-newrelic.licensekey=</strong>0123456789abcdef0123456789abcdef01234567</pre>

    <p>Alternatively you can also supply a <code>newrelic.yml</code> configuration file for the Java agent and Boxfuse will
        automatically use that instead. Boxfuse will then install the agent for you, but won't override any application name you may have configured.
        If you haven't configured a New Relic license key as described above, Boxfuse will use
        the license key contained in your <code>newrelic.yml</code> configuration file instead.</p>

    <p>If you use Maven or Gradle, the <code>newrelic.yml</code> file should be put into the <code>src/main/webapp/WEB-INF</code> directory.
        Boxfuse will then automatically configure the New Relic Java agent to use it.</p>

    <pre class="filetree"><i class="fa fa-folder-open"></i> my-tomee-app
  <i class="fa fa-folder-open"></i> src
    <i class="fa fa-folder-open"></i> main
      <i class="fa fa-folder"></i> java
      <i class="fa fa-folder"></i> resources
      <i class="fa fa-folder-open"></i> webapp
        <i class="fa fa-folder-open"></i> WEB-INF
          <span><i class="fa fa-file"></i> newrelic.yml</span></pre>

    <h2 id="sysctl">Linux Kernel Tuning (experts only)</h2>

    <p>If you need to tune the Linux kernel running in your instance, simply place a <code>sysctl.conf</code> file inside your war file under <code>/WEB-INF</code>.
        In a Maven or Gradle project this means you have to put it under <code>src/main/webapp/WEB-INF</code>:</p>
    <pre class="filetree"><i class="fa fa-folder-open"></i> my-tomee-app
  <i class="fa fa-folder-open"></i> src
    <i class="fa fa-folder-open"></i> main
      <i class="fa fa-folder"></i> java
      <i class="fa fa-folder"></i> resources
      <i class="fa fa-folder-open"></i> webapp
        <i class="fa fa-folder-open"></i> WEB-INF
          <span><i class="fa fa-file-text"></i> sysctl.conf</span></pre>

    <p>Boxfuse will then <strong>automatically configure the Linux kernel to use these settings</strong>.</p>

    <p class="next-steps">
        <a class="btn btn-primary" href="/docs/payloads/jar">Executable Jar <i class="fa fa-arrow-right"></i></a>
    </p>
</div>